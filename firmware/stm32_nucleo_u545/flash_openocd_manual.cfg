source [find interface/stlink.cfg]
transport select hla_swd
adapter speed 1000

# STM32U5 specific configuration
set CHIPNAME stm32u5x
set ENDIAN little

# Create target
target create $CHIPNAME.cpu cortex_m -endian $ENDIAN -chain-position $CHIPNAME.cpu

# Configure flash
set FLASH_SIZE 0x00100000  # 1MB for STM32U545
flash bank $_CHIPNAME.flash stm32l4x 0x08000000 0 $FLASH_SIZE 0 0 $_CHIPNAME.cpu

# Reset configuration
reset_config srst_only

# Init
$CHIPNAME.cpu configure -event gdb-attach { halt }
